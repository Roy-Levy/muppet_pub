<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SEM with 1 Latent Variable and 1 Outcome, in 2 Fragments • muppet</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="SEM with 1 Latent Variable and 1 Outcome, in 2 Fragments">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">muppet</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/index.html">Examples and Tips</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>SEM with 1 Latent Variable and 1 Outcome, in 2
Fragments</h1>
            
            <h4 data-toc-skip class="date">2025-08-22</h4>
      

      <div class="hidden name"><code>example_1.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This example demonstrates how to use the muppet() package to perform
MUPPET modeling for a structural equation modeling (SEM) example. This
example has one latent variable with indicators and an outcome. The
model consists of 2 fragments. Fragment 1 is the factor analytic
measurement model for the indicators. Fragment 2 is a structural model
relating the latent variable to the outcome.</p>
</div>
<div class="section level2">
<h2 id="data-prepration">Data Prepration<a class="anchor" aria-label="anchor" href="#data-prepration"></a>
</h2>
<p>Load the package and extract the data for this example.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://roy-levy.github.io/muppet_pub/">muppet</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">one.factor.interpr.confound</span>, package <span class="op">=</span> <span class="st">"muppet"</span><span class="op">)</span></span>
<span><span class="va">data.for.mplus</span> <span class="op">&lt;-</span> <span class="va">one.factor.interpr.confound.data</span></span></code></pre></div>
<p>Look through the data and check if any of the column names have more
than 8 characters. Owing to Mplus’s naming conventions for parameters,
variable names should be 8 characters or fewer. For variables that are
discrete (categorical), the length of the names should be 6 characters
or fewer. (This holds as long as there are fewer than 10 thresholds for
the categorical variables. If you’re using a variable with 10 or more
thresholds, you will likely need an even shorter variable name.)</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># * Check if any column names are more than 8 characters</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">data.for.mplus</span><span class="op">)</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">8</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Do not proceed. Rename Mplus variables to have &lt;= 8 characters"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"See Permissive Norms Example R file for code on renaming variables"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="specify-fragment-1">Specify Fragment 1<a class="anchor" aria-label="anchor" href="#specify-fragment-1"></a>
</h2>
<p>The key specification for Fragment 1 is the Mplus syntax for the
factor analytic measurement model. In this specification, the latent
variable mean and variance are fixed, and all the loadings and
intercepts are estimated.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Mplus.MODEL.syntax.fragment.1</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st"> ! Factor Model</span></span>
<span><span class="st"> F1 by x1-x4*;</span></span>
<span><span class="st"> [x1-x4];</span></span>
<span><span class="st"></span></span>
<span><span class="st"> ! Factor Variances</span></span>
<span><span class="st"> F1@1;</span></span>
<span><span class="st"></span></span>
<span><span class="st"> ! Factor Means</span></span>
<span><span class="st"> [F1@0];</span></span>
<span><span class="st">"</span></span></code></pre></div>
<p>Now define the specifications for the fragment. In this list we are
passing along the syntax and data from above. By setting
<code>conditioning = 0</code> in this list of specifications, we are
fitting this fragment without conditioning on any other fragment.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fragment.1.specs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"Measurement Model"</span>,</span>
<span>  model.syntax <span class="op">=</span> <span class="va">Mplus.MODEL.syntax.fragment.1</span>,</span>
<span>  conditioning <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data.for.mplus</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="specify-fragment-2">Specify Fragment 2<a class="anchor" aria-label="anchor" href="#specify-fragment-2"></a>
</h2>
<p>The key specification for Fragment 2 in the Mplus syntax is the
structural portion. Note that the syntax also includes the
specifications fixing the latent variable mean and variance. These were
included in Fragment 1 as well, but also need to be here to preserve
this constraint. In effect, the function will bring in the results for
the <em>fitted</em> parameters from Fragment 1. But the latent variable
mean and variance were not fitted parameters in Fragment 1. They were
fixed in Fragment 1. So they will not be “brought forward” by looking at
the fitted results from Fragment 1. So they need to be specified here as
well.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Mplus.MODEL.syntax.fragment.2</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st"></span></span>
<span><span class="st">! Structural relations</span></span>
<span><span class="st"> y1 on F1;</span></span>
<span><span class="st"></span></span>
<span><span class="st">! Structural intercepts</span></span>
<span><span class="st">[y1];</span></span>
<span><span class="st"></span></span>
<span><span class="st"> ! Factor Variances</span></span>
<span><span class="st"> F1@1;</span></span>
<span><span class="st"></span></span>
<span><span class="st"> ! Factor Means</span></span>
<span><span class="st"> [F1@0];</span></span>
<span><span class="st">"</span></span></code></pre></div>
<p>Now define the specifications for the fragment. In this list we are
passing along the syntax and data, as we did for Fragment 1. By setting
<code>conditioning = 1</code> in this list of specifications, we are
instructing the functions to condition on the results from Fragment
1.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fragment.2.specs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"Structural Model With an Outcome"</span>,</span>
<span>  model.syntax <span class="op">=</span> <span class="va">Mplus.MODEL.syntax.fragment.2</span>,</span>
<span>  conditioning <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  data <span class="op">=</span> <span class="va">data.for.mplus</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conduct-muppet-modeling">Conduct MUPPET modeling<a class="anchor" aria-label="anchor" href="#conduct-muppet-modeling"></a>
</h2>
<p>The code below demonstrates conducting MUPPET modeling. The
<code>fragments</code> argument contains the specifications for the
model fragments defined above. The rest of the arguments communicate
specifications for running MCMC and saving output. Running this code
will write out output files.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/MUPPET.modular.function.html">MUPPET.modular.function</a></span><span class="op">(</span></span>
<span>  fragments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">fragment.1.specs</span>, <span class="va">fragment.2.specs</span><span class="op">)</span>,</span>
<span>  n.chains <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  n.warmup <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  n.burnin <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  n.iters.per.chain.after.warmup.and.burnin <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  n.estimation.batches <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  convergence.assessment <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  save.summary.plots.from.MUPPET <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Roy Levy.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
